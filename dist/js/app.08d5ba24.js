(function(t){function e(e){for(var i,s,o=e[0],l=e[1],h=e[2],u=0,d=[];u<o.length;u++)s=o[u],Object.prototype.hasOwnProperty.call(r,s)&&r[s]&&d.push(r[s][0]),r[s]=0;for(i in l)Object.prototype.hasOwnProperty.call(l,i)&&(t[i]=l[i]);c&&c(e);while(d.length)d.shift()();return a.push.apply(a,h||[]),n()}function n(){for(var t,e=0;e<a.length;e++){for(var n=a[e],i=!0,o=1;o<n.length;o++){var l=n[o];0!==r[l]&&(i=!1)}i&&(a.splice(e--,1),t=s(s.s=n[0]))}return t}var i={},r={app:0},a=[];function s(e){if(i[e])return i[e].exports;var n=i[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,s),n.l=!0,n.exports}s.m=t,s.c=i,s.d=function(t,e,n){s.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},s.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},s.t=function(t,e){if(1&e&&(t=s(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(s.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)s.d(n,i,function(e){return t[e]}.bind(null,i));return n},s.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return s.d(e,"a",e),e},s.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},s.p="/";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],l=o.push.bind(o);o.push=e,o=o.slice();for(var h=0;h<o.length;h++)e(o[h]);var c=l;a.push([0,"chunk-vendors"]),n()})({0:function(t,e,n){t.exports=n("56d7")},1937:function(t,e,n){},"56d7":function(t,e,n){"use strict";n.r(e);n("139b"),n("4389"),n("be51"),n("d9c7");var i=n("56ba"),r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"app"}},[t.gameIsOver?n("div",{staticClass:"overlay__game-over"}):t._e(),n("div",{staticClass:"game-area"},[n("div",{class:{"player-health-container":!0,"player-health-container--won":t.gameWon,"player-health-container--lost":t.gameLost}},[n("span",{class:{"player-health":!0,"player-health--positive":t.playerHealthHistory.length>0&&t.playerHealthHistory[0].modifier>0&&t.playerHealthHistory[0].turn+t.scoreHistoryEffectTurns>=t.turns&&!t.gameWon,"player-health--negative":t.playerHealthHistory.length>0&&t.playerHealthHistory[0].modifier<0&&t.playerHealthHistory[0].turn+t.scoreHistoryEffectTurns>=t.turns&&!t.gameWon}},[t._v(" "+t._s(this.playerHealth)+" ")]),n("span",{class:{"player-health-total":!0}},[t._v(" "+t._s(" / "+this.healthGoal)+" ")])]),t._l(t.world,(function(e,i){return n("div",{key:i,staticClass:"row"},t._l(e,(function(e,r){return n("div",{key:r,staticClass:"cell",class:t.cellClasses(e,r,i)},[t._v(" "+t._s((t.isPlayerCell(r,i)?t.playerEmoji:"")+(t.isPlayerCell(r,i)?t.items.map((function(t){return t.symbol()})).join(""):""))+" ")])})),0)})),this.turns<3?n("div",{class:{"introductions-container":!0}},[n("p",[t._v(" Attack things with 😼 using Arrowkeys/Spacebar (or Swipe/Doubletap). Hit the goal of "+t._s(t.healthGoal)+"! ")])]):t._e()],2)])},a=[],s=(n("6433"),n("3503"),n("df46"),n("3d9f"),n("3186"),n("2508"),n("4515"),n("8ac7")),o=n("e4e8"),l=n.n(o),h={sword:function(){return{attack:function(t){t.health-=2},symbol:function(){return"🗡️"}}}},c={fish:function(){return{damage:0,healthBonus:10,health:1,gameLimit:10,type:"fish",speed:8,movePattern:"fleeing"}},monster:function(){return{damage:4,healthBonus:2,health:2,type:"monster",gameLimit:15,speed:2,movePattern:"hostile"}}},u={name:"App",data:function(){return{world:new Array(12).fill(1).map((function(){return new Array(12).fill(1).map((function(){return{dug:1,npcs:[]}}))})),x:null,y:null,items:[h.sword()],playerHealth:50,healthGoal:100,npcs:[],turns:0,playerHealthHistory:[],initialMonsters:3,playerHungerFactor:1,scoreHistoryEffectTurns:1}},beforeDestroy:function(){this.teardownKeyPresses()},beforeMount:function(){var t=this.getRandomXY();this.x=t.x,this.y=t.y},mounted:function(){this.setupKeyPresses();for(var t=0;t<this.initialMonsters;t++)this.addNpc();window.data=this.$data,window.comp=this},computed:{gameLost:function(){return 0===this.playerHealth},playerEmoji:function(){return 0===this.playerHealth?"😿":this.playerHealth<5?"🙀":this.playerHealth<10?"🐱":this.playerHealth<15?"😾":this.playerHealth>100?"😺":"😼"},gameIsOver:function(){return this.gameLost||this.gameWon},gameWon:function(){return this.playerHealth>=this.healthGoal}},methods:{setPlayerHealth:function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];t<0&&(t=0),t>this.healthGoal&&(t=this.healthGoal),e&&this.playerHealthHistory.unshift({modifier:t-this.playerHealth,turn:this.turns}),this.playerHealth=t},addNpc:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"monster",e=Object(s["a"])(Object(s["a"])({},this.getRandomXY()),c[t]());e.gameLimit<=this.npcs.reduce((function(e,n){return n.type===t?e+1:e}),0)||(this.world[e.y][e.x].dug=!0,this.npcs.push(e),this.world[e.y][e.x].npcs.push(e))},setNpcPosition:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t.x,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t.y;this.world[t.y][t.x].npcs=this.world[t.y][t.x].npcs.filter((function(e){return e!==t})),this.world[n][e].npcs.push(t),t.x=e,t.y=n},isNth:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.turns%t===e},advanceNpcs:function(){var t=this;this.npcs.forEach((function(e){var n=e.x,i=e.y;void 0!==e.movePattern&&void 0!==e.speed&&t.isNth(e.speed)&&("hostile"===e.movePattern?t.x<e.x?n--:t.x>e.x?n++:t.y<e.y?i--:t.y>e.y&&i++:"fleeing"===e.movePattern&&(t.x<e.x?n++:t.x>e.x?n--:t.y<e.y?i++:t.y>e.y&&i--)),n=Math.min(Math.max(0,n),t.world[0].length-1),i=Math.min(Math.max(0,i),t.world.length-1),0!==t.world[i][n].npcs.length||n===t.x&&i===t.y||t.setNpcPosition(e,n,i),n===t.x&&i===t.y&&t.setPlayerHealth(t.playerHealth-e.damage)}))},advanceTurn:function(){this.gameIsOver||(this.isNth(1)&&this.setPlayerHealth(this.playerHealth-this.playerHungerFactor,!1),this.advanceNpcs(),this.isNth(4+Math.floor(this.turns/40))&&this.addNpc("monster"),this.isNth(Math.max(1,3-Math.floor(this.turns/40)))&&this.addNpc("fish"),this.turns++)},teardownKeyPresses:function(){this.handlerFn&&(document.removeEventListener("keydown",this.handlerFn),this.mc.destroy())},setupKeyPresses:function(){var t=this;this.handlerFn||(this.handlerFn=function(e){if(!t.gameIsOver)switch(e.key){case"ArrowLeft":t.digLeft(),t.moveLeft(),t.advanceTurn();break;case"ArrowRight":t.digRight(),t.moveRight(),t.advanceTurn();break;case"ArrowUp":t.digUp(),t.moveUp(),t.advanceTurn();break;case"ArrowDown":t.digDown(),t.moveDown(),t.advanceTurn();break;case" ":t.advanceTurn();break}},this.mc=new l.a(this.$el),this.mc.get("swipe").set({direction:l.a.DIRECTION_ALL}),this.mc.on("swipeleft",(function(){t.handlerFn({key:"ArrowLeft"})})),this.mc.on("swiperight",(function(){t.handlerFn({key:"ArrowRight"})})),this.mc.on("swipeup",(function(){t.handlerFn({key:"ArrowUp"})})),this.mc.on("swipedown",(function(){t.handlerFn({key:"ArrowDown"})})),this.mc.on("doubletap",(function(){t.handlerFn({key:" "})})),document.addEventListener("keydown",this.handlerFn))},isPlayerCell:function(t,e){return t===this.x&&e===this.y},cellClasses:function(t,e,n){var i={"cell--undug":t.dug>0,"cell--player":e===this.x&&n===this.y,"cell--dead-player":e===this.x&&n===this.y&&this.gameLost},r=this.npcs.find((function(t){return t.x===e&&t.y===n}));return r&&(i["cell__npc-"+r.type]=!0,this.isNth(r.speed)&&(i["cell__npc-"+r.type+"--moving"]=!0),r.x<this.x?i["cell__npc-"+r.type+"--left-of-player"]=!0:r.x>this.x&&(i["cell__npc-"+r.type+"--right-of-player"]=!0)),i},attackNpc:function(t){var e=this;t.npcs=t.npcs.filter((function(t){void 0!==t.healthBonus&&e.setPlayerHealth(e.playerHealth+t.healthBonus);var n=e.items.find((function(t){return t.attack}));return n.attack(t),!(t.health<=0)||(e.npcs=e.npcs.filter((function(e){return t!==e})),!1)}))},moveUp:function(){var t,e=null===(t=this.world[this.y-1])||void 0===t?void 0:t[this.x];void 0!==e&&0===e.dug&&(this.attackNpc(e),0===e.npcs.length&&this.y--)},moveDown:function(){var t,e=null===(t=this.world[this.y+1])||void 0===t?void 0:t[this.x];void 0!==e&&0===e.dug&&(this.attackNpc(e),0===e.npcs.length&&this.y++)},moveLeft:function(){var t,e=null===(t=this.world[this.y])||void 0===t?void 0:t[this.x-1];void 0!==e&&0===e.dug&&(this.attackNpc(e),0===e.npcs.length&&this.x--)},moveRight:function(){var t,e=null===(t=this.world[this.y])||void 0===t?void 0:t[this.x+1];void 0!==e&&0===e.dug&&(this.attackNpc(e),0===e.npcs.length&&this.x++)},digUp:function(){var t,e=null===(t=this.world[this.y-1])||void 0===t?void 0:t[this.x];void 0!==e&&e.dug>0&&e.dug--},digDown:function(){var t,e=null===(t=this.world[this.y+1])||void 0===t?void 0:t[this.x];void 0!==e&&e.dug>0&&e.dug--},digLeft:function(){var t,e=null===(t=this.world[this.y])||void 0===t?void 0:t[this.x-1];void 0!==e&&e.dug>0&&e.dug--},digRight:function(){var t,e=null===(t=this.world[this.y])||void 0===t?void 0:t[this.x+1];void 0!==e&&e.dug>0&&e.dug--},getRandomXY:function(){var t,e=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:2,i=function(){return{x:Math.floor(12*Math.random()),y:Math.floor(12*Math.random())}},r=function(t,i){return(t<=e.x-n||t>=e.x+n)&&(i<=e.y-n||i>=e.y+n)};do{t=i()}while(n>0&&!r(t.x,t.y));return t}},components:{}},d=u,p=(n("5c0b"),n("bd92")),y=Object(p["a"])(d,r,a,!1,null,null,null),f=y.exports;i["a"].config.productionTip=!1,new i["a"]({render:function(t){return t(f)}}).$mount("#app")},"5c0b":function(t,e,n){"use strict";n("1937")}});
//# sourceMappingURL=app.08d5ba24.js.map